ğŸš‘ Emergency Vehicle Priority Routing & Signal Preemption System

A real-time, fault-tolerant traffic signal preemption system that dynamically routes ambulances to the nearest hospital while safely coordinating traffic signals under single and multi-ambulance contention.

ğŸš€ Why this project exists

Urban emergency response suffers from:

Traffic congestion

Signal delays

Lack of coordination between ambulances and traffic infrastructure

This project simulates a city-scale emergency routing system that:

Tracks ambulances in real time

Computes fastest routes to hospitals

Preempts traffic signals safely

Handles failures (GPS loss, backend crash)

Resolves conflicts when multiple ambulances compete for the same signal


ğŸš€ Why this project exists

Urban emergency response suffers from:

Traffic congestion

Signal delays

Lack of coordination between ambulances and traffic infrastructure

This project simulates a city-scale emergency routing system that:

Tracks ambulances in real time

Computes fastest routes to hospitals

Preempts traffic signals safely

Handles failures (GPS loss, backend crash)

Resolves conflicts when multiple ambulances compete for the same signal


ğŸ§  Key Engineering Challenges Solved

Real-time telemetry ingestion

Fault tolerance using Redis TTL

Finite State Machineâ€“based signal control

Distributed conflict resolution (no deadlock, no oscillation)

Multi-ambulance priority arbitration


ğŸ—ï¸ System Architecture
Ambulance App (simulated)
        |
        |  GPS updates (HTTP)
        v
FastAPI Backend
        |
        |  Routing + arbitration logic
        v
Redis (real-time state & locks)
        |
        |  FSM-controlled transitions
        v
Traffic Signal Controller



ğŸ”„ Core Workflow
1ï¸âƒ£ Live GPS ingestion

Ambulance sends GPS periodically

Backend maps GPS â†’ nearest road node

State stored in Redis with TTL

2ï¸âƒ£ Route computation

Nearest hospital selected

Shortest path computed

Planned route stored in Redis

3ï¸âƒ£ Signal preemption

Upcoming signal identified

Ambulance submits a claim

Arbitration decides winner

FSM transitions signal to PREEMPT

4ï¸âƒ£ Recovery & safety

After ambulance passes â†’ signal recovers

If GPS is lost â†’ all signals immediately cancel

No stuck green states possible



ğŸš¦ Traffic Signal FSM

Each signal runs a deterministic FSM:

NORMAL â†’ PREEMPT â†’ RECOVERY â†’ NORMAL

Guarantees

No illegal transitions

No permanent preemption

Safe fallback on failures

FSM manages state only â€” ownership is handled separately.



âš–ï¸ Multi-Ambulance Conflict Resolution

When multiple ambulances approach the same signal:

Arbitration model

Each ambulance submits a claim to Redis

Claims stored in a Redis ZSET

One deterministic winner is elected

Priority score
priority =
  100 Ã— emergency_level
+ 10  Ã— (1 / distance_to_signal)
+ 1   Ã— waiting_time

Properties guaranteed

âœ… Single winner

âœ… No deadlock

âœ… No oscillation

âœ… Fairness (no starvation)

âœ… Deterministic behavior

Ownership is sticky until release, preventing flip-flopping.
